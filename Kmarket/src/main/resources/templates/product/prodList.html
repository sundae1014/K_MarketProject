<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Cupang::상품목록</title>
    <link rel="stylesheet" th:href="@{/css/product/style_index.css}">
    <link rel="stylesheet" th:href="@{/css/product/style_prodList.css}">
    <link rel="stylesheet" th:href="@{/css/product/style_prodView.css}">
    <link rel="stylesheet" th:href="@{/css/product/style_header.css}">
    <link rel="stylesheet" th:href="@{/css/product/style_footer.css}">

    <!-- 유저별 권한 기능 -->
    <script th:src="@{/js/product/user-menu.js}" defer></script>
    <!-- 검색 기능 -->
    <script th:src="@{/js/product/search.js}" defer></script>
    <!-- 전체 카테고리 구현 기능 -->
    <script th:src="@{/js/product/category.js}" defer></script>
    <!-- 베스트상품 온앤오프 & 스크롤 기능 -->
    <script th:src="@{/js/product/best.js}" defer></script>
    <!-- 옵션 선택 기능 -->
    <script th:src="@{/js/product/option.js}" defer></script>
    <!-- 찜하기/장바구니/바로구매 기능 -->
    <script th:src="@{/js/product/prod-actions.js}" defer></script>
    <!-- 2차 카테고리 > 상품 목록 타이틀 갱신 기능 -->
    <script th:src="@{/js/product/list-title.js}" defer></script>
    <!-- 기준별 목록 정렬 기능 -->
    <script th:src="@{/js/product/category-sort.js}" defer></script>
    <!-- TOP 버튼(맨 위로) 기능 -->
    <script th:src="@{/js/product/top-btn.js}" defer></script>
</head>
<body>
    <main class="page">

        <!-- 헤더 -->
        <div th:replace="_header :: headerFragment"></div>

        <!-- 상품 경로 -->
        <div class="container">
            <nav class="nav-path">
                <ol>
                    <li><a th:href="@{/}">HOME</a></li>
                    <li><a href="#">식품</a></li>
                    <li><a href="#">식품 선물세트</a></li>
                </ol>
            </nav>
        </div>

        <div class="list-wrap container">

            <!-- 베스트상품 -->
            <aside class="col-a">
                <div class="best-panel">
                    <h3 class="section-title">베스트상품</h3>
                    <ol class="best-num-list" id="best-num-list">
                        <li><button data-idx="0">NO.1</button></li>
                        <li><button data-idx="1">NO.2</button></li>
                        <li><button data-idx="2">NO.3</button></li>
                        <li><button data-idx="3">NO.4</button></li>
                        <li><button data-idx="4">NO.5</button></li>
                    </ol>
                </div>
            </aside>

            <!-- 우측: 상품 목록 -->
            <section class="col-b">
                <div class="list-header">
                    <h2 class="list-title" id="category-title">식품 선물세트</h2>

                    <!-- 정렬 옵션: 현재 sort와 같으면 on 클래스 -->
                    <nav class="sort-toggle">
                        <a class="sort-btn" th:href="@{/product/list(sort='sold')}"
                           th:classappend="${sort}=='sold' ? ' on'">판매많은순</a>
                        <a class="sort-btn" th:href="@{/product/list(sort='lowPrice')}"
                           th:classappend="${sort}=='lowPrice' ? ' on'">낮은가격순</a>
                        <a class="sort-btn" th:href="@{/product/list(sort='highPrice')}"
                           th:classappend="${sort}=='highPrice' ? ' on'">높은가격순</a>
                        <a class="sort-btn" th:href="@{/product/list(sort='score')}"
                           th:classappend="${sort}=='score' ? ' on'">평점높은순</a>
                        <a class="sort-btn" th:href="@{/product/list(sort='review')}"
                           th:classappend="${sort}=='review' ? ' on'">후기많은순</a>
                        <a class="sort-btn" th:href="@{/product/list(sort='recent')}"
                           th:classappend="${sort}=='recent' ? ' on'">최근등록순</a>
                    </nav>
                </div>


                <!-- 상품 그리드 -->
                <div class="product-grid">
                    <a class="product-card"
                       th:each="prod : ${products}"
                       th:href="@{/product/view(prodNo=${prod.prodNumber})}">
                        <div class="product-thumb">
                            <img th:src="${prod.img1} != null ? @{${prod.img1}} : @{/images/product/placeholder.png}" alt="상품 이미지">
                        </div>
                        <p class="product-name" th:text="${prod.prodName}">상품명</p>
                        <strong class="product-sale"
                                th:text="${#numbers.formatInteger(prod.salePrice,3,'COMMA')} + '원'">0원</strong>
                    </a>
                </div>

                <!-- 페이지네이션 -->
                <nav class="pagination">
                    <a href="#" class="page-link prev" aria-label="이전 페이지">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24" fill="none" stroke="currentColor"
                             stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="lucide lucide-chevron-left-icon lucide-chevron-left">
                            <path d="m15 18-6-6 6-6"/>
                        </svg>
                    </a>
                    <a href="#" class="page-link active">1</a>
                    <a href="#" class="page-link">2</a>
                    <a href="#" class="page-link">3</a>
                    <a href="#" class="page-link">4</a>
                    <a href="#" class="page-link next" aria-label="다음 페이지">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24" fill="none" stroke="currentColor"
                             stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="lucide lucide-chevron-right-icon lucide-chevron-right">
                            <path d="m9 18 6-6-6-6"/>
                        </svg>
                    </a>
                    <a href="#" class="page-link GTEnd" aria-label="맨 끝으로 이동">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24" fill="none" stroke="currentColor"
                             stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="lucide lucide-chevrons-right-icon lucide-chevrons-right">
                            <path d="m6 17 5-5-5-5"/><path d="m13 17 5-5-5-5"/>
                        </svg>
                    </a>
                </nav>
            </section>
        </div>

        <!-- TOP 버튼 -->
        <button id="topBtn" class="top-btn" aria-label="맨 위로 이동">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 class="lucide lucide-chevrons-up-icon lucide-chevrons-up">
                <path d="m17 11-5-5-5 5"/>
                <path d="m17 18-5-5-5 5"/>
            </svg>
        </button>

        <!-- 푸터 -->
        <div th:replace="_footer :: footerFragment"></div>
    </main>
</body>
</html>