<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.kmarket.mapper.admin.CouponMapper">

    <!-- 쿠폰 등록 -->
    <insert id="insertCoupon" parameterType="kr.co.kmarket.dto.CouponDTO">
        INSERT INTO COUPON (
            COUPON_NO,
            COUPON_TYPE,
            COUPON_NAME,
            BENEFIT,
            USE_PERIOD,
            ISSUER,
            ISSUE_DATE,
            USE_COUNT,
            STATUS,
            MANAGE,
            SAYOUNG,
            BARGUP
        ) VALUES (
                     COUPON_SEQ.NEXTVAL,
                     #{couponType, jdbcType=INTEGER},
                     #{couponName, jdbcType=VARCHAR},
                     #{benefit, jdbcType=VARCHAR},
                     #{usePeriod, jdbcType=VARCHAR},
                     #{issuer, jdbcType=VARCHAR},
                     #{issueDate, jdbcType=DATE},
                     #{useCount, jdbcType=INTEGER},
                     #{status, jdbcType=VARCHAR},
                     #{manage, jdbcType=VARCHAR},
                     #{sayoung, jdbcType=INTEGER},
                     #{bargup, jdbcType=INTEGER}
                 )
    </insert>


    <!-- 쿠폰 목록 -->
    <select id="selectCoupons" resultType="kr.co.kmarket.dto.CouponDTO">
        SELECT
            COUPON_NO AS coupon_no,
            COUPON_TYPE AS coupon_type,
            COUPON_NAME AS coupon_name,
            BENEFIT AS benefit,
            USE_PERIOD AS use_period,
            ISSUER AS issuer,
            ISSUE_DATE AS issue_date,
            USE_COUNT AS use_count,
            STATUS AS status,
            MANAGE AS manage,
            SAYOUNG AS sayoung,
            BARGUP AS bargup
        FROM COUPON
        ORDER BY COUPON_NO DESC
    </select>

</mapper>
