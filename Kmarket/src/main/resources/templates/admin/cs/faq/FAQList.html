<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>공지사항 목록</title>
    <link rel="stylesheet" th:href="@{/css/admin/main/header_footer.css}">
    <link rel="stylesheet" th:href="@{/css/admin/cs/faq/faqList.css}">
    <script th:src="@{/js/admin/cs/recruit/sidebarAction.js}" defer></script>
    <link rel="stylesheet" th:href="@{/css/admin/main/sidebar.css}">

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            //체크박스 전체 선택
            const allSelect = document.querySelector(".all_select");
            const checkboxes = document.querySelectorAll("tbody input[type='checkbox']");

            allSelect.addEventListener("change", function() {
                checkboxes.forEach(cb => cb.checked = allSelect.checked);
            });

            //1차,2차 카테고리
            const category_box = {
                "member": {"register" : "가입", //회원
                    "withdrawal" : "탈퇴",
                    "info" : "회원정보", "login" : "로그인"
                },
                "benefit": {"couponAndDiscount" : "쿠폰 / 할인혜택", //쿠폰 / 혜택 / 이벤트
                    "point" : "포인트",
                    "partnership" : "제휴",
                    "event" : "이벤트"
                },
                "orderAndPay": {"product" : "상품", //주문 / 결제
                    "pay" : "결제",
                    "buyList" : "구매내역",
                    "receipt" : "영수증 / 증빙"
                },
                "deliver": {"statusAndPeriod" : "배송상태 / 기간",  //배송
                    "checkAndChange" : "배송정보확인 / 변경",
                    "foreign" : "해외배송",
                    "day" : "당일배송",
                    "direct" : "해외직구"
                },
                "cancelAndReturnAndExchange": {"returnAndWithdrawal": "반품신청 / 철회", //취소 / 반품 / 교환
                    "returnAndChange" : "반품정보확인 / 변경",
                    "exchangeAndWithdrawal" : "교환 AS신청 / 철회",
                    "exchangeAndChange" : "교환정보확인 / 변경",
                    "cancelAndWithdrawal": "취소신청 / 철회",
                    "cancelAndRefund" : "취소확인 / 환불정보"
                },
                "traverlAndAccommodationAndAviation": {"travel" : "여행 / 숙박", //여행 / 숙박 / 항공
                    "flight": "항공"
                },
                "Safetrade": {"service" : "서비스 이용규칙 위반", //안전거래
                    "knowledge" : "지식재산권침해",
                    "contraveningGoods" : "법령 및 정책위반 상품",
                    "article" : "게시물 정책위반",
                    "induction" : "직거래 / 외부거래유도",
                    "advertising" : "표시광고",
                    "teenager" : "청소년 위해상품 / 이미지"
                }
            };
            const category1 = document.getElementById("category1");
            const category2 = document.getElementById("category2");
            category2.innerHTML = '<option>2차 선택</option>';

            category1.addEventListener("change", function() {
                const selected = this.value;
                category2.innerHTML = '<option>2차 선택</option>';

                if(category_box[selected]) {
                    for(const key in category_box[selected]) {
                        const option = document.createElement("option");
                        option.value = key; // 영어 키
                        option.textContent = category_box[selected][key]; // 한국어 표시
                        category2.appendChild(option);
                    }
                }
            });
            category2.addEventListener("change", function() {
                const type1 = category1.value;
                const type2 = this.value;
                if(type2) {
                    window.location.href = `/kmarket/admin/cs/faq/list/${type1}/${type2}`;
                }
            });

            //삭제 기능
            const deleteBtn = document.querySelector(".select_delete");
            deleteBtn.addEventListener("click", async () => {
                const selected = document.querySelectorAll("tbody .row-checkbox:checked");
                const idList = Array.from(selected).map(cb => cb.value);
                console.log("삭제 id리스트: ", idList);

                const response = await fetch("/kmarket/admin/cs/faq/list", {
                    method: "DELETE",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(idList)
                });

                if(response.ok) {
                    alert("삭제 완료!");
                    location.reload();
                } else {
                    alert("삭제 실패!");
                }
            });

        });
    </script>
</head>

<body>
  <header>
    <div class="header-layout">
        <div class="header-content">
            <a th:href="@{/admin}">
                <img th:src="@{/images/admin/main/cupangMS_logo(color).png}" alt="로고">
            </a>
            <div class="header-link">
                <div class="header-item">
                    <a th:href="@{/}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house-icon lucide-house"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
                        <p>HOME</p>
                    </a>
                </div>

                <div class="header-item">
                    <a th:href="@{/cs/index}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-headset-icon lucide-headset"><path d="M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z"/><path d="M21 16v2a4 4 0 0 1-4 4h-5"/></svg>
                        <p>고객센터</p>
                    </a>
                </div>

                <button>로그아웃</button>
            </div>
        </div>
    </div>

</header>
<div class="container">
  <!-- 사이드바 -->
<aside class="sidebar">
                <div class="side-item">
                    <div class="main-menu">
                       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings-icon lucide-settings"><path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"/><circle cx="12" cy="12" r="3"/></svg>
                       <p>환경설정</p>
                    </div>
                    <ul class="sub-menu">
                        <li><a th:href="@{/admin/config/basic}" class="sub-link">기본설정</a></li>
                        <li><a th:href="@{/admin/config/banner}" class="sub-link">배너관리</a></li>
                        <li><a th:href="@{/admin/config/policy}" class="sub-link">약관관리</a></li>
                        <li><a th:href="@{/admin/config/category}" class="sub-link">카테고리</a></li>
                        <li><a th:href="@{/admin/config/version}" class="sub-link">버전관리</a></li>
                    </ul>
                </div>
                <div class="side-item">
                    <div class="main-menu">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-store-icon lucide-store"><path d="M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5"/><path d="M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244"/><path d="M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05"/></svg>
                        <p>상점관리</p>
                    </div>
                    <ul class="sub-menu">
                        <li><a th:href="@{/admin/shop/list}" class="sub-link">상점목록</a></li>
                        <li><a th:href="@{/admin/shop/sales}" class="sub-link">매출현황</a></li>
                    </ul>
                </div>
                <div class="side-item">
                    <div class="main-menu">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-pen-icon lucide-user-pen"><path d="M11.5 15H7a4 4 0 0 0-4 4v2"/><path d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/><circle cx="10" cy="7" r="4"/></svg>
                        <p>회원관리</p>
                    </div>
                    <ul class="sub-menu">
                        <li><a th:href="@{/admin/member/list}" class="sub-link">회원목록</a></li>
                        <li><a th:href="@{/admin/member/point}" class="sub-link">포인트관리</a></li>
                    </ul>
                </div>
                <div class="side-item">
                    <div class="main-menu">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-package-open-icon lucide-package-open"><path d="M12 22v-9"/><path d="M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z"/><path d="M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13"/><path d="M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z"/></svg>
                        <p>상품관리</p>
                    </div>
                    <ul class="sub-menu">
                        <li><a th:href="@{/admin/product/list}" class="sub-link">상품목록</a></li>
                        <li><a th:href="@{/admin/product/register}" class="sub-link">상품등록</a></li>
                    </ul>
                </div>
                <div class="side-item">
                   <div class="main-menu">
                       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-receipt-text-icon lucide-receipt-text"><path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"/><path d="M14 8H8"/><path d="M16 12H8"/><path d="M13 16H8"/></svg>
                       <p>주문관리</p>
                    </div>
                    <ul class="sub-menu">
                        <li><a th:href="@{/admin/order/list}" class="sub-link">주문현황</a></li>
                        <li><a th:href="@{/admin/order/delivery}" class="sub-link">배송현황</a></li>
                    </ul>
                </div>
                <div class="side-item">
                   <div class="main-menu">
                       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ticket-percent-icon lucide-ticket-percent"><path d="M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/><path d="M9 9h.01"/><path d="m15 9-6 6"/><path d="M15 15h.01"/></svg>
                       <p>쿠폰관리</p>
                    </div>
                    <ul class="sub-menu">
                        <li><a th:href="@{/admin/coupon/list}" class="sub-link">쿠폰목록</a></li>
                        <li><a th:href="@{/admin/coupon/issued}" class="sub-link">쿠폰발급현황</a></li>
                    </ul>
                </div>
                <div class="side-item">
                    <div class="main-menu">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-laptop-minimal-check-icon lucide-laptop-minimal-check"><path d="M2 20h20"/><path d="m9 10 2 2 4-4"/><rect x="3" y="4" width="18" height="12" rx="2"/></svg>
                        <p>고객센터</p>
                    </div>
                    <ul class="sub-menu">
                        <li><a th:href="@{/admin/cs/notice/list}" class="sub-link">공지사항</a></li>
                        <li><a th:href="@{/admin/cs/faq/list}" class="sub-link">자주묻는질문</a></li>
                        <li><a th:href="@{/admin/cs/qna/list}" class="sub-link">문의하기</a></li>
                        <li><a th:href="@{/admin/cs/recruit/list}" class="sub-link">채용하기</a></li>
                    </ul>
                </div>

            </aside>

  <!-- 메인 콘텐츠 -->
  <div class="content">
    <div class="header-top">
      <h1>자주묻는질문 목록</h1>
      <div class="breadcrumb">
        <a href="#">HOME</a> &gt; 
        <a href="#">고객센터</a> &gt; 
        <span>자주묻는질문</span>
      </div>
    </div>

    <div class="search-bar">
        <select name="type1" id="category1">
            <option>1차 선택</option>
            <option value="member">회원</option>
            <option value="benefit">쿠폰 / 이벤트</option>
            <option value="orderAndPay">주문 / 결제</option>
            <option value="deliver">배송</option>
            <option value="cancelAndReturnAndExchange">취소 / 반품 / 교환</option>
            <option value="traverlAndAccommodationAndAviation">여행 / 숙박 / 항공</option>
            <option value="Safetrade">안전거래</option>
        </select>
        <select name="category2" id="category2">
        </select>
    </div>

      <table>
          <thead>
          <tr>
              <th><input type="checkbox" class="all_select"></th>
              <th>번호</th>
              <th>1차유형</th>
              <th>2차유형</th>
              <th>제목</th>
              <th>조회</th>
              <th>날짜</th>
              <th>관리</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="faq : ${dtoList}">
              <td><input type="checkbox" class="row-checkbox" th:value="${faq.id}"></td>
              <td>[[${faq.id}]]</td>
              <td>[[${faq.type1}]]</td>
              <td>[[${faq.type2}]]</td>
              <td><a th:href="@{/admin/cs/faq/view(id=${faq.id})}" class="qna_a">[[${faq.title}]]</a></td>
              <td>[[${faq.views}]]</td>
              <td th:text="${#temporals.format(faq.reg_date, 'yy.MM.dd')}"></td>
              <td class="action">
                  <a th:href="@{/admin/cs/faq/delete(id=${faq.id})}">[삭제]</a>
                  <a th:href="@{/admin/cs/faq/modify(id=${faq.id})}">[수정]</a>
              </td>
          </tr>
          </tbody>
      </table>

    <div class="bottom-bar">
      <div>
        <button class="btn2 select_delete">선택삭제</button>
      </div>
      <div>
        <button class="btn" th:onclick="|location.href='@{/admin/cs/faq/write}'|">작성하기</button>
      </div>
    </div>
  </div>
  
</div>
<footer>
    <div class="footer-layout">
        <div class="footer-content">
            <img th:src="@{/images/admin/main/cupangMS_logo(color).png}" alt="로고">
            <div class="about-company">
                <h2>(주)큐팡</h2>
                <h2>대표이사 이름(db)</h2>
                <h2>|</h2>
                <h2>사업자등록번호</h2>
                <h2>123-132-1231232(db)</h2>
                <h2>|</h2>
                <h2>통신판매업신고</h2>
                <h2>2023-부산 해운대구-1232(db)</h2>
                <h2>|</h2>
                <h2>부산광역시 부산진구 중앙동(db)</h2>
                <h2>(삼성동, green빌딩) 7층(db)</h2>
            </div>
            <div class="about-company">
                <h2>고객센터</h2>
                <h2>|</h2>
                <h2>02-1234-1231</h2>
                <h2>평일 09:00 ~ 18:00(db)</h2>

                <h2>이메일</h2>
                <h2>abc@cupang(db)</h2>

                <h2>전자금융거래 분쟁담당</h2>
                <h2>12321-12321(db)</h2>
            </div>
            <h2>Copyright@cupang.All.rights.reserved (db)</h2>
        </div>

    </div>

</footer>
</body>
</html>
